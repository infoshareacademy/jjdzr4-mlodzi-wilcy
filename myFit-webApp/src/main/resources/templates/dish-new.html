<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{addDishPage.title}"></title>
    <meta charset="UTF-8">
</head>
<body>
<div style="text-align: center">
    <h1 th:text="#{addDishPage.headLine}"></h1>
    <form th:object="${dishDto}" th:action="@{/dishes/user/dish/new}" th:method="post">


        <label th:for="name_input" th:text="#{dish.name}"> </label><br>
        <input type="text" id="name_input" th:field="*{name}"><br>
        <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div><br>

        <table>
            <thead>
            <tr>
                <th th:text="#{addDishPage.row}"></th>
                <th th:text="#{addDishPage.product}"></th>
                <th th:text="#{addDishPage.numberOfProducts}"></th>
                <th>
                    <button type="submit" name="addRow" th:text="#{addDishPage.addRow}"></button>
                </th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row,rowStat : *{rows}">
                <td th:text="${rowStat.count}">1</td>
                <td>
                    <select th:field="*{rows[__${rowStat.index}__].product}">
                        <option th:each="var : ${allProducts}"
                                th:value="${var}"
                                th:text="${var}">Product name</option>
                    </select>
                </td>
                <td>
                    <input type="text" th:field="*{rows[__${rowStat.index}__].amount}" />
                </td>
                <td>
                    <button type="submit" name="removeRow" th:value="${rowStat.index}" th:text="#{addDishPage.removeRow}"></button>
                </td>
            </tr>
            </tbody>
        </table>

        <button type="submit" th:text="#{addDishPage.submit}"></button>

    </form>
</div>
</body>
</html>